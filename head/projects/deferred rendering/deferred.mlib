<?xml version="1.0" ?>
<materialLib name="Deferred Rendering">
	
	<renderTargets>
		<renderTarget name ="gbuffer">
			<size width="512" height="512" />
			<colors>
				<color name="normals" internalFormat="RGBA" />
				<color name="colors"  internalFormat="RGBA" />
			</colors>
		</renderTarget>
	</renderTargets>
	
	<shaders>
		<shader name="fillGBuffers" 	ps="shaders/fillGBuffers.frag" 
										vs="shaders/fillGBuffers.vert" />
		<shader name="oneshot" 			ps="shaders/oneshot.frag" 
										vs="shaders/fillGBuffers.vert" />
		<shader name="compose" 			ps="shaders/compose.frag" 
										vs="shaders/quadShader.vert" />
	</shaders>
	
	<materials>
		<material name="fillGBuffers">
			<shader>
				<name>fillGBuffers</name>
				<values>
					<valueof uniform="PVM"          	type="CURRENT" context="MATRIX" 
														component="PROJECTION_VIEW_MODEL" />
					<valueof uniform="M"          		type="CURRENT" context="MATRIX" 
														component="MODEL" />
					<valueof uniform="NormalMatrix"   	type="CURRENT" context="MATRIX" 
														component="NORMAL" />
					<valueof uniform="diffuse" 			type="CURRENT" context="COLOR" 
														component="DIFFUSE" />
					<valueof uniform="texUnit" 			type="CURRENT" context="TEXTURE" 
														component="UNIT" id="0" />	
					<valueof uniform="texCount" 		type="CURRENT" context="TEXTURE" 
														component="COUNT"  />	
				</values>
			</shader>
		</material>
		<material name="oneshot">
			<shader>
				<name>oneshot</name>
				<values>
					<valueof uniform="PVM"          	type="CURRENT" context="MATRIX" 
														component="PROJECTION_VIEW_MODEL" />
					<valueof uniform="M"          		type="CURRENT" context="MATRIX" 
														component="MODEL" />
					<valueof uniform="NormalMatrix"   	type="CURRENT" context="MATRIX" 
														component="NORMAL" />
					<valueof uniform="diffuse" 			type="CURRENT" context="COLOR" 
														component="DIFFUSE" />
					<valueof uniform="texUnit" 			type="CURRENT" context="TEXTURE" 
														component="UNIT" id="0" />	
					<valueof uniform="texCount" 		type="CURRENT" context="TEXTURE" 
														component="COUNT"  />	
					<valueof uniform="lightDirection" 	type="LIGHT" context="Sun" 
														component="DIRECTION" /> 
					<valueof uniform="V" 				type="CAMERA" context="MainCamera" 
														component="VIEW_MATRIX" /> 
				</values>
			</shader>
		</material>
		
		<material name="compose">
			<shader>
				<name>compose</name>
				<values>
					<valueof uniform="texColor" 		type="CURRENT" context="TEXTURE" 
														component="UNIT" id="0" />	
					<valueof uniform="texNormal" 		type="CURRENT" context="TEXTURE" 
														component="UNIT" id="1" />	
					<valueof uniform="lightDirection" 	type="LIGHT" context="Sun" 
														component="DIRECTION" /> 
					<valueof uniform="V" 				type="CAMERA" context="MainCamera" 
														component="VIEW_MATRIX" /> 
				</values>
			</shader>
			<textures>
				<texture UNIT="0" name="colors" />
				<texture UNIT="1" name="normals" />
			</textures>
		</material>		
	</materials>

</materialLib>